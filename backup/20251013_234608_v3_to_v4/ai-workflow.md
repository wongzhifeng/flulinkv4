# AI Agent协作工作流

## 日常开发提示词流程

### 晨会启动提示词
```
作为FluLink项目的AI开发者，现在开始今日开发工作。

请先阅读以下文件了解项目状态：
1. memory/memory.md - 项目总览
2. memory/core-definition.md - 核心定义
3. memory/feature-context/current-task.md - 今日重点任务

今日重点任务：[具体任务]

遵循所有开发规范：
- 哲学一致性：所有代码必须对应《德道经》依据
- 技术约束：Bun后端、Solid前端、Turso数据库
- 代码规范：使用Solid.js响应式API
- 性能要求：响应时间<200ms，支持千人并发

开始开发前请确认：
- [ ] 已阅读项目记忆库
- [ ] 理解当前任务目标
- [ ] 确认技术约束条件
- [ ] 准备哲学依据引用
```

### 代码审查提示词
```
现在进行代码审查，文件路径：[文件路径]

审查维度：
1. 哲学一致性 - 检查德道经依据
2. 技术规范 - 验证Solid.js/Bun/Turso使用
3. 性能优化 - 检查响应时间和内存使用
4. 代码质量 - 验证类型安全和错误处理

发现问题时提供具体修改建议，引用memory中相关决策记录。

审查命令：
bun run check:philosophy
bun run check:performance  
bun run check:edge
```

### 问题调试提示词
```
遇到技术问题：[问题描述]

调试流程：
1. 先检查bug-solutions/中是否有类似解决方案
2. 如无记录，则系统化分析问题
3. 记录新解决方案到bug-solutions/
4. 更新相关技术决策记录

问题分析维度：
- 哲学一致性影响
- 技术栈兼容性
- 性能影响评估
- 边缘计算适配

调试规则：
- 必须按调试规则执行
- 必须记录完整解决方案
- 必须实施预防措施
- 必须更新相关文档
```

## 上下文切换保持提示词

### 会话开始必读提示词
```
你正在继续开发FluLink项目，这是一个基于Bun+SolidStart的分布式社交应用。

重要上下文：
- 项目采用《德道经》哲学基础
- 技术栈严格限制：Bun+SolidStart+Turso
- 核心隐喻："家"(低压力社交) + "国"(生态秩序)双架构
- 部署平台：Zeabur一键部署

请先读取memory/中的相关文件：
1. memory.md - 项目总览和当前状态
2. 当前任务对应的上下文文件
3. 最近的技术决策记录

确保开发连贯性，遵循所有已建立的规范和约束。
```

### 会话结束总结提示词
```
本次会话结束，请更新memory/中的相关文件：

更新任务进度状态：
- 更新feature-context/中对应任务的进度
- 记录完成的功能和代码变更
- 标记遇到的问题和解决方案

记录重要技术决策：
- 新增技术决策到technical-decisions/
- 更新哲学决策到philosophy-decisions/
- 记录代码架构变更

记录遇到的问题和解决方案：
- 新增bug解决方案到bug-solutions/
- 更新相关技术文档
- 标记需要后续处理的问题

明确下次会话需要继续的内容：
- 列出未完成的任务
- 标记需要验证的假设
- 准备下次会话的上下文
```

## 协作规则

### 1. 记忆库维护
- 每次会话开始必须读取相关记忆文件
- 每次会话结束必须更新记忆库
- 重要决策必须记录到对应目录
- 保持记忆库的完整性和一致性

### 2. 代码规范执行
- 严格遵循架构约束规则
- 使用Solid.js响应式API
- 保持Bun运行时兼容性
- 优化Turso数据库查询

### 3. 哲学一致性检查
- 所有功能必须有德道经依据
- 代码注释必须包含哲学引用
- 架构设计必须符合"无为而治"原则
- 定期运行哲学一致性检查

### 4. 性能优化优先
- 响应时间<200ms
- 支持千人并发
- 边缘计算优化
- 内存使用最小化

### 5. 冲突解决原则
- 哲学一致性 > 技术最优解
- 性能优先 > 功能完整
- 边缘友好 > 中心化设计
- 用户自主 > 系统强制

---

【2025-10-13 日志补充 - 部署与前端改造】
- 高保真模板落地：创建 `flulink-app/`（首页、图谱、发布、档案、故事板、assets），将根路由指向 `flulink-app/index.html`，并开放 `/assets/*` 静态映射。
- 首页集成：信息流卡片、热度显示、筛选chips、底部导航统一；“感染”按钮对接 `POST /api/strains/{id}/infect` 实时更新；发布中心对接 `POST /api/strains` 成功动画并跳首页。
- 新建Solid高保真组件（内部开发版）：`Home.tsx`、`SpreadMapPage.tsx`、`CreateStrainPage.tsx`、`ProfileImmunityPage.tsx`、`StoryboardPage.tsx`；`App.tsx` 轻壳切页。
- 导航一致性：顶部/底部导航规范化、`aria-current="page"`、底部导航由按钮改 `<a>` 实链互跳。
- 规范提示词落库：新增 `memory/validation-prompts/navigation-spec.md` 与 `page-prompts.md`。
- 部署：Zeabur 验证成功（flulink-v2）。

【技术决策】
- 模板直出优先：根路由读取模板HTML保证首屏一致性与部署稳定。
- 就近联调：模板端 fetch 接口以缩短后端验证路径。

【问题与解决】
- 线上首页仍为旧模板：因服务器内联HTML，改读文件并开放静态资源后解决。
- 底部导航不可跳转：改 `<button>` 为 `<a>` 并添加 `aria-current`。

【下次行动】
- 将模板交互逐步替换为 Solid 正式路由与状态。
- 图谱页数据来源聚合与API设计。（TODO）
- 进阶页面（星团/聊天/热力图）静态高保真与数据占位。

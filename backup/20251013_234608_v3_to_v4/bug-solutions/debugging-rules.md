# 技术问题调试规则
**文件**：memory/bug-solutions/debugging-rules.md
**创建时间**：2025-01-12
**适用范围**：FluLink项目所有技术问题

## 调试流程规则

### 1. 问题发现阶段
当遇到技术问题时，必须按以下顺序执行：

#### 步骤1：检查现有解决方案
```bash
# 检查bug-solutions目录
ls memory/bug-solutions/

# 搜索类似问题
grep -r "关键词" memory/bug-solutions/
```

#### 步骤2：问题分类
- **构建错误** - 编译、构建失败
- **运行时错误** - 应用启动、运行失败
- **功能错误** - 业务逻辑、API响应错误
- **性能问题** - 响应慢、内存泄漏
- **部署问题** - 部署失败、环境配置

#### 步骤3：严重程度评估
- **高** - 导致构建失败、应用无法启动
- **中** - 影响功能正常使用
- **低** - 不影响核心功能

### 2. 问题分析阶段

#### 系统化分析方法
1. **收集错误信息**
   - 完整的错误日志
   - 错误发生的环境信息
   - 复现步骤

2. **分析根本原因**
   - 技术层面：代码、配置、依赖
   - 环境层面：系统、版本、权限
   - 业务层面：逻辑、数据、流程

3. **影响范围评估**
   - 受影响的文件
   - 受影响的功能
   - 受影响的用户

### 3. 解决方案实施阶段

#### 解决方案设计原则
1. **最小化影响** - 优先选择影响最小的方案
2. **可回滚性** - 确保方案可以回滚
3. **可验证性** - 方案必须可以验证效果
4. **文档化** - 详细记录解决方案

#### 实施步骤
1. **备份当前状态**
2. **实施解决方案**
3. **验证修复效果**
4. **更新相关文档**

### 4. 解决方案记录阶段

#### 记录模板
每个解决方案必须包含：
- 问题描述（错误信息、环境、文件）
- 问题分析（根本原因、技术细节）
- 解决方案（具体步骤、代码示例）
- 实施步骤（详细操作流程）
- 预防措施（避免重复发生）
- 相关文件（修复的文件列表）
- 测试验证（验证方法和结果）
- 经验总结（关键教训、最佳实践）

#### 文件命名规范
```
bug-solutions/XXX-问题类型-简要描述.md
例如：
001-solidstart-jsx-syntax-error.md
002-turso-connection-timeout.md
003-solid-hydration-mismatch.md
```

### 5. 预防措施实施阶段

#### 代码规范更新
- 更新架构规则文档
- 更新代码审查清单
- 更新开发规范

#### 工具配置更新
- 更新ESLint规则
- 更新TypeScript配置
- 更新构建脚本

#### 流程优化
- 更新开发流程
- 更新测试流程
- 更新部署流程

## 调试工具和方法

### 1. 日志分析
```bash
# 查看构建日志
bun run build 2>&1 | tee build.log

# 查看运行时日志
bun run start 2>&1 | tee runtime.log

# 查看部署日志
zeabur logs --follow
```

### 2. 代码检查
```bash
# TypeScript检查
bun run tsc --noEmit

# ESLint检查
bun run lint

# 哲学一致性检查
bun run check:philosophy
```

### 3. 性能分析
```bash
# 性能基准测试
bun run check:performance

# 边缘计算适配检查
bun run check:edge

# 内存使用分析
bun run --inspect src/index.ts
```

### 4. 环境验证
```bash
# 健康检查
curl http://localhost:3000/api/health

# API测试
curl http://localhost:3000/api/strains

# 数据库连接测试
bun run scripts/test-db-connection.ts
```

## 调试最佳实践

### 1. 问题隔离
- 使用最小复现案例
- 逐步排除影响因素
- 使用版本控制回滚

### 2. 系统化思考
- 从简单到复杂
- 从已知到未知
- 从局部到全局

### 3. 文档驱动
- 记录每个步骤
- 记录每个决策
- 记录每个结果

### 4. 预防为主
- 建立检查清单
- 定期代码审查
- 持续集成测试

## 调试规则执行

### 强制执行
- 所有技术问题必须按此流程处理
- 所有解决方案必须记录到bug-solutions
- 所有预防措施必须更新到相关文档

### 质量检查
- 解决方案完整性检查
- 文档质量检查
- 预防措施有效性检查

### 持续改进
- 定期回顾调试规则
- 优化调试流程
- 更新工具和方法

---

**规则状态**：✅ 已建立
**执行状态**：✅ 强制执行
**更新状态**：🔄 持续优化

"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[436],{9376:function(e,t,r){var n=r(5475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},2995:function(e,t,r){r.d(t,{LJ:function(){return l},tD:function(){return s}});var n=r(7437);r(2265);var a=r(3448);let s=e=>{let{title:t="FluLink",user:r,onMenuClick:a,onProfileClick:s}=e;return(0,n.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-40 glass-effect border-b border-white/10",children:(0,n.jsx)("div",{className:"max-w-md mx-auto px-4 py-3",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("button",{onClick:a,className:"p-2 rounded-xl text-text-secondary hover:text-accent-gold hover:bg-primary-card transition-all duration-300",children:(0,n.jsx)("i",{className:"fas fa-bars text-xl"})}),(0,n.jsx)("h1",{className:"text-xl font-bold gradient-text-gold text-shadow",children:t}),(0,n.jsx)("button",{onClick:s,className:"p-2 rounded-xl text-text-secondary hover:text-accent-gold hover:bg-primary-card transition-all duration-300",children:r?(0,n.jsx)("div",{className:"w-8 h-8 rounded-full overflow-hidden bg-gradient-gold",children:r.avatar?(0,n.jsx)("img",{src:r.avatar,alt:r.name,className:"w-full h-full object-cover"}):(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center text-black font-semibold text-sm",children:r.name.charAt(0).toUpperCase()})}):(0,n.jsx)("i",{className:"fas fa-user text-xl"})})]})})})},l=e=>{let{currentPage:t,onPageChange:r}=e;return(0,n.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 glass-effect border-t border-white/10",children:(0,n.jsx)("div",{className:"max-w-md mx-auto px-4 py-3",children:(0,n.jsx)("div",{className:"flex items-center justify-around",children:[{id:"home",label:"星空图谱",icon:"fas fa-star",page:"home"},{id:"create",label:"星种创建",icon:"fas fa-plus-circle",page:"create"},{id:"clusters",label:"星团共鸣",icon:"fas fa-users",page:"clusters"},{id:"profile",label:"个人档案",icon:"fas fa-user-circle",page:"profile"}].map(e=>(0,n.jsxs)("button",{onClick:()=>r(e.page),className:(0,a.cn)("nav-item flex-col gap-1 min-w-0 flex-1",t===e.page?"active":""),children:[(0,n.jsx)("i",{className:(0,a.cn)("text-lg transition-all duration-300",t===e.page?"text-accent-gold":"text-text-secondary"),children:e.icon}),(0,n.jsx)("span",{className:(0,a.cn)("text-xs font-medium transition-all duration-300",t===e.page?"text-accent-gold":"text-text-secondary"),children:e.label})]},e.id))})})})}},6741:function(e,t,r){r.d(t,{II:function(){return l},Vp:function(){return u},Zb:function(){return i},gb:function(){return d},gx:function(){return c},qE:function(){return x},u_:function(){return o},zx:function(){return s}});var n=r(7437);r(2265);var a=r(3448);let s=e=>{let{variant:t="primary",size:r="md",loading:s=!1,className:l,children:c,disabled:i,...o}=e;return(0,n.jsx)("button",{className:(0,a.cn)("font-semibold rounded-xl transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-accent-gold disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",ghost:"text-text-primary hover:text-accent-gold hover:bg-primary-card px-4 py-2 rounded-xl"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-6 py-3",lg:"px-8 py-4 text-lg"}[r],l),disabled:i||s,...o,children:s?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"loading-spinner w-4 h-4"}),(0,n.jsx)("span",{children:"加载中..."})]}):c})},l=e=>{let{label:t,error:r,icon:s,className:l,...c}=e;return(0,n.jsxs)("div",{className:"w-full",children:[t&&(0,n.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:t}),(0,n.jsxs)("div",{className:"relative",children:[s&&(0,n.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary",children:s}),(0,n.jsx)("input",{className:(0,a.cn)("input-field w-full",s?"pl-10":"",r?"ring-2 ring-accent-red":"",l),...c})]}),r&&(0,n.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:r})]})},c=e=>{let{label:t,error:r,className:s,...l}=e;return(0,n.jsxs)("div",{className:"w-full",children:[t&&(0,n.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:t}),(0,n.jsx)("textarea",{className:(0,a.cn)("input-field w-full min-h-[100px] resize-vertical",r?"ring-2 ring-accent-red":"",s),...l}),r&&(0,n.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:r})]})},i=e=>{let{children:t,className:r,hover:s=!0,glass:l=!1}=e;return(0,n.jsx)("div",{className:(0,a.cn)("neumorphism-card",l?"glass-effect":"",s?"hover:transform hover:-translate-y-1 hover:shadow-neumorphism-hover":"",r),children:t})},o=e=>{let{isOpen:t,onClose:r,title:s,children:l,size:c="md"}=e;return t?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:r}),(0,n.jsxs)("div",{className:(0,a.cn)("relative w-full bg-primary-card rounded-2xl shadow-2xl",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[c]),children:[s&&(0,n.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:s}),(0,n.jsx)("button",{onClick:r,className:"text-text-secondary hover:text-accent-gold transition-colors",children:(0,n.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,n.jsx)("div",{className:"p-6",children:l})]})]}):null},d=e=>{let{size:t="md",text:r="加载中..."}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,n.jsx)("div",{className:(0,a.cn)("loading-spinner",{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t])}),r&&(0,n.jsx)("p",{className:"text-text-secondary text-sm",children:r})]})},u=e=>{let{children:t,variant:r="default",size:s="md",className:l}=e;return(0,n.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-lg font-medium",{default:"bg-primary-card text-text-primary",gold:"bg-gradient-gold text-black",red:"bg-accent-red text-white",purple:"bg-accent-purple text-white",cyan:"bg-accent-cyan text-white"}[r],{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm"}[s],l),children:t})},x=e=>{let{src:t,alt:r="头像",size:s="md",fallback:l,className:c}=e;return(0,n.jsx)("div",{className:(0,a.cn)("rounded-full overflow-hidden bg-gradient-gold flex items-center justify-center",{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"}[s],c),children:t?(0,n.jsx)("img",{src:t,alt:r,className:"w-full h-full object-cover"}):(0,n.jsx)("span",{className:"text-black font-semibold",children:l||r.charAt(0).toUpperCase()})})}},6886:function(e,t,r){r.d(t,{h:function(){return c},pb:function(){return s}});var n=r(9261),a=r(257);let s=new n.ZP(a.env.NEXT_PUBLIC_POCKETBASE_URL||"https://pocketbase-final.zeabur.app");class l{async getCurrentUser(){try{return s.authStore.model}catch(e){return null}}async login(e,t){return(await s.collection("users").authWithPassword(e,t)).record}async register(e,t,r){return await s.collection("users").create({username:e,email:t,password:r,passwordConfirm:r})}async getStarSeeds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await s.collection("star_seeds").getList(e,t,{sort:"-created",expand:"creator"})).items}async createStarSeed(e){return await s.collection("star_seeds").create(e)}async getStarSeed(e){return await s.collection("star_seeds").getOne(e,{expand:"creator"})}async getStarClusters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await s.collection("star_clusters").getList(e,t,{sort:"-resonance_score",expand:"members,core_users"})).items}async createStarCluster(e){return await s.collection("star_clusters").create(e)}async createInteraction(e){return await s.collection("interactions").create(e)}async getInteractions(e){return(await s.collection("interactions").getList(1,50,{filter:'star_seed = "'.concat(e,'"'),expand:"user"})).items}subscribeToStarSeeds(e){return s.collection("star_seeds").subscribe("*",t=>{e(t.record)})}subscribeToInteractions(e){return s.collection("interactions").subscribe("*",t=>{e(t.record)})}}let c=new l},3448:function(e,t,r){r.d(t,{Ox:function(){return o},cL:function(){return i},cn:function(){return s},p6:function(){return l},uf:function(){return c},uo:function(){return u},vV:function(){return d}});var n=r(1994),a=r(3335);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.m6)((0,n.W)(t))}function l(e){let t=new Date(e),r=new Date().getTime()-t.getTime();return r<6e4?"刚刚":r<36e5?"".concat(Math.floor(r/6e4),"分钟前"):r<864e5?"".concat(Math.floor(r/36e5),"小时前"):r<6048e5?"".concat(Math.floor(r/864e5),"天前"):t.toLocaleDateString("zh-CN")}function c(e){return e<1e3?e.toString():e<1e4?"".concat((e/1e3).toFixed(1),"K"):e<1e6?"".concat((e/1e4).toFixed(1),"万"):"".concat((e/1e6).toFixed(1),"M")}function i(e,t,r,n){let a=(r-e)*Math.PI/180,s=(n-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="";for(let n=0;n<e;n++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function d(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function u(e){if(e.length<6)return{isValid:!1,strength:"weak",message:"密码长度至少6位"};let t=/[a-z]/.test(e),r=[t,/[A-Z]/.test(e),/\d/.test(e),/[!@#$%^&*(),.?":{}|<>]/.test(e)].filter(Boolean).length;return r<2?{isValid:!1,strength:"weak",message:"密码强度太弱，请包含字母和数字"}:r<3?{isValid:!0,strength:"medium",message:"密码强度中等"}:{isValid:!0,strength:"strong",message:"密码强度很强"}}}}]);
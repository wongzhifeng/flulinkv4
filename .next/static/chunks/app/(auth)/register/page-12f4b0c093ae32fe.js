(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{9245:function(e,t,s){Promise.resolve().then(s.bind(s,6875))},6875:function(e,t,s){"use strict";s.r(t),s.d(t,{RegisterPage:function(){return i},default:function(){return o}});var r=s(7437),a=s(2265),n=s(6741),l=s(3448),c=s(6886);let i=e=>{let{onRegisterSuccess:t,onSwitchToLogin:s}=e,[i,o]=(0,a.useState)({username:"",email:"",password:"",confirmPassword:""}),[d,m]=(0,a.useState)({}),[u,x]=(0,a.useState)(!1),h=(e,t)=>{o(s=>({...s,[e]:t})),d[e]&&m(t=>({...t,[e]:""}))},f=()=>{let e={};if(i.username?i.username.length<2&&(e.username="用户名至少2个字符"):e.username="请输入用户名",i.email?(0,l.vV)(i.email)||(e.email="请输入有效的邮箱地址"):e.email="请输入邮箱",i.password){let t=(0,l.uo)(i.password);t.isValid||(e.password=t.message)}else e.password="请输入密码";return i.confirmPassword?i.password!==i.confirmPassword&&(e.confirmPassword="两次输入的密码不一致"):e.confirmPassword="请确认密码",m(e),0===Object.keys(e).length},g=async e=>{if(e.preventDefault(),f())try{x(!0);let e=await c.h.register(i.username,i.email,i.password);t(e)}catch(e){console.error("注册失败:",e),m({general:e.message||"注册失败，请稍后再试"})}finally{x(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-primary-bg flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold gradient-text-gold mb-2",children:"FluLink"}),(0,r.jsx)("p",{className:"text-text-secondary",children:"星尘共鸣版 v4.0"})]}),(0,r.jsx)(n.Zb,{children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-text-primary mb-6 text-center",children:"创建账户"}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsx)(n.II,{label:"用户名",type:"text",value:i.username,onChange:e=>h("username",e.target.value),error:d.username,placeholder:"请输入用户名",icon:(0,r.jsx)("i",{className:"fas fa-user"}),disabled:u}),(0,r.jsx)(n.II,{label:"邮箱",type:"email",value:i.email,onChange:e=>h("email",e.target.value),error:d.email,placeholder:"请输入邮箱地址",icon:(0,r.jsx)("i",{className:"fas fa-envelope"}),disabled:u}),(0,r.jsx)(n.II,{label:"密码",type:"password",value:i.password,onChange:e=>h("password",e.target.value),error:d.password,placeholder:"请输入密码",icon:(0,r.jsx)("i",{className:"fas fa-lock"}),disabled:u}),(0,r.jsx)(n.II,{label:"确认密码",type:"password",value:i.confirmPassword,onChange:e=>h("confirmPassword",e.target.value),error:d.confirmPassword,placeholder:"请再次输入密码",icon:(0,r.jsx)("i",{className:"fas fa-lock"}),disabled:u}),d.general&&(0,r.jsx)("div",{className:"text-accent-red text-sm text-center",children:d.general}),(0,r.jsx)(n.zx,{type:"submit",className:"w-full",loading:u,disabled:u,children:u?(0,r.jsx)(n.gb,{size:"sm"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("i",{className:"fas fa-user-plus mr-2"}),"注册"]})})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-text-secondary text-sm",children:["已有账户？",(0,r.jsx)("button",{onClick:s,className:"text-accent-gold hover:text-accent-cyan transition-colors ml-1",children:"立即登录"})]})})]})}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:(0,r.jsx)("i",{className:"fas fa-star text-accent-gold"})}),(0,r.jsx)("div",{className:"text-sm text-text-secondary",children:"星空图谱"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:(0,r.jsx)("i",{className:"fas fa-robot text-accent-cyan"})}),(0,r.jsx)("div",{className:"text-sm text-text-secondary",children:"AI 创作"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-2xl mb-2",children:(0,r.jsx)("i",{className:"fas fa-users text-accent-purple"})}),(0,r.jsx)("div",{className:"text-sm text-text-secondary",children:"星团共鸣"})]})]})]})})};function o(){return(0,r.jsx)(i,{onRegisterSuccess:e=>{},onSwitchToLogin:()=>{}})}},6741:function(e,t,s){"use strict";s.d(t,{II:function(){return l},Vp:function(){return m},Zb:function(){return i},gb:function(){return d},gx:function(){return c},qE:function(){return u},u_:function(){return o},zx:function(){return n}});var r=s(7437);s(2265);var a=s(3448);let n=e=>{let{variant:t="primary",size:s="md",loading:n=!1,className:l,children:c,disabled:i,...o}=e;return(0,r.jsx)("button",{className:(0,a.cn)("font-semibold rounded-xl transition-all duration-300 transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-accent-gold disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",{primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",ghost:"text-text-primary hover:text-accent-gold hover:bg-primary-card px-4 py-2 rounded-xl"}[t],{sm:"px-3 py-1.5 text-sm",md:"px-6 py-3",lg:"px-8 py-4 text-lg"}[s],l),disabled:i||n,...o,children:n?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"loading-spinner w-4 h-4"}),(0,r.jsx)("span",{children:"加载中..."})]}):c})},l=e=>{let{label:t,error:s,icon:n,className:l,...c}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:t}),(0,r.jsxs)("div",{className:"relative",children:[n&&(0,r.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-text-secondary",children:n}),(0,r.jsx)("input",{className:(0,a.cn)("input-field w-full",n?"pl-10":"",s?"ring-2 ring-accent-red":"",l),...c})]}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:s})]})},c=e=>{let{label:t,error:s,className:n,...l}=e;return(0,r.jsxs)("div",{className:"w-full",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-text-primary mb-2",children:t}),(0,r.jsx)("textarea",{className:(0,a.cn)("input-field w-full min-h-[100px] resize-vertical",s?"ring-2 ring-accent-red":"",n),...l}),s&&(0,r.jsx)("p",{className:"mt-1 text-sm text-accent-red",children:s})]})},i=e=>{let{children:t,className:s,hover:n=!0,glass:l=!1}=e;return(0,r.jsx)("div",{className:(0,a.cn)("neumorphism-card",l?"glass-effect":"",n?"hover:transform hover:-translate-y-1 hover:shadow-neumorphism-hover":"",s),children:t})},o=e=>{let{isOpen:t,onClose:s,title:n,children:l,size:c="md"}=e;return t?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),(0,r.jsxs)("div",{className:(0,a.cn)("relative w-full bg-primary-card rounded-2xl shadow-2xl",{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[c]),children:[n&&(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-text-primary",children:n}),(0,r.jsx)("button",{onClick:s,className:"text-text-secondary hover:text-accent-gold transition-colors",children:(0,r.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,r.jsx)("div",{className:"p-6",children:l})]})]}):null},d=e=>{let{size:t="md",text:s="加载中..."}=e;return(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(0,r.jsx)("div",{className:(0,a.cn)("loading-spinner",{sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t])}),s&&(0,r.jsx)("p",{className:"text-text-secondary text-sm",children:s})]})},m=e=>{let{children:t,variant:s="default",size:n="md",className:l}=e;return(0,r.jsx)("span",{className:(0,a.cn)("inline-flex items-center rounded-lg font-medium",{default:"bg-primary-card text-text-primary",gold:"bg-gradient-gold text-black",red:"bg-accent-red text-white",purple:"bg-accent-purple text-white",cyan:"bg-accent-cyan text-white"}[s],{sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm"}[n],l),children:t})},u=e=>{let{src:t,alt:s="头像",size:n="md",fallback:l,className:c}=e;return(0,r.jsx)("div",{className:(0,a.cn)("rounded-full overflow-hidden bg-gradient-gold flex items-center justify-center",{sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"}[n],c),children:t?(0,r.jsx)("img",{src:t,alt:s,className:"w-full h-full object-cover"}):(0,r.jsx)("span",{className:"text-black font-semibold",children:l||s.charAt(0).toUpperCase()})})}},6886:function(e,t,s){"use strict";s.d(t,{h:function(){return c},pb:function(){return n}});var r=s(9261),a=s(257);let n=new r.ZP(a.env.NEXT_PUBLIC_POCKETBASE_URL||"https://pocketbase-final.zeabur.app");class l{async getCurrentUser(){try{return n.authStore.model}catch(e){return null}}async login(e,t){return(await n.collection("users").authWithPassword(e,t)).record}async register(e,t,s){return await n.collection("users").create({username:e,email:t,password:s,passwordConfirm:s})}async getStarSeeds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await n.collection("star_seeds").getList(e,t,{sort:"-created",expand:"creator"})).items}async createStarSeed(e){return await n.collection("star_seeds").create(e)}async getStarSeed(e){return await n.collection("star_seeds").getOne(e,{expand:"creator"})}async getStarClusters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return(await n.collection("star_clusters").getList(e,t,{sort:"-resonance_score",expand:"members,core_users"})).items}async createStarCluster(e){return await n.collection("star_clusters").create(e)}async createInteraction(e){return await n.collection("interactions").create(e)}async getInteractions(e){return(await n.collection("interactions").getList(1,50,{filter:'star_seed = "'.concat(e,'"'),expand:"user"})).items}subscribeToStarSeeds(e){return n.collection("star_seeds").subscribe("*",t=>{e(t.record)})}subscribeToInteractions(e){return n.collection("interactions").subscribe("*",t=>{e(t.record)})}}let c=new l},3448:function(e,t,s){"use strict";s.d(t,{Ox:function(){return o},cL:function(){return i},cn:function(){return n},p6:function(){return l},uf:function(){return c},uo:function(){return m},vV:function(){return d}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function l(e){let t=new Date(e),s=new Date().getTime()-t.getTime();return s<6e4?"刚刚":s<36e5?"".concat(Math.floor(s/6e4),"分钟前"):s<864e5?"".concat(Math.floor(s/36e5),"小时前"):s<6048e5?"".concat(Math.floor(s/864e5),"天前"):t.toLocaleDateString("zh-CN")}function c(e){return e<1e3?e.toString():e<1e4?"".concat((e/1e3).toFixed(1),"K"):e<1e6?"".concat((e/1e4).toFixed(1),"万"):"".concat((e/1e6).toFixed(1),"M")}function i(e,t,s,r){let a=(s-e)*Math.PI/180,n=(r-t)*Math.PI/180,l=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(s*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))*6371}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s="";for(let r=0;r<e;r++)s+=t.charAt(Math.floor(Math.random()*t.length));return s}function d(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function m(e){if(e.length<6)return{isValid:!1,strength:"weak",message:"密码长度至少6位"};let t=/[a-z]/.test(e),s=[t,/[A-Z]/.test(e),/\d/.test(e),/[!@#$%^&*(),.?":{}|<>]/.test(e)].filter(Boolean).length;return s<2?{isValid:!1,strength:"weak",message:"密码强度太弱，请包含字母和数字"}:s<3?{isValid:!0,strength:"medium",message:"密码强度中等"}:{isValid:!0,strength:"strong",message:"密码强度很强"}}}},function(e){e.O(0,[137,579,971,117,744],function(){return e(e.s=9245)}),_N_E=e.O()}]);
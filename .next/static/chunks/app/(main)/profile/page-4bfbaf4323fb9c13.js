(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86],{9543:function(e,s,a){Promise.resolve().then(a.bind(a,246))},246:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return x}});var t=a(7437),l=a(2265),i=a(2995),r=a(6741),n=a(3448);let c=e=>{var s,a,i,c,d,o,x,m,v,h,u,p,f,j,N,g,y,b,_,w,k,S,C,I,z,P,Z,L,D,O,E,R,A,F,U,V,q,J,M,B,G,H;let{currentUser:K,onUpdateProfile:Q,onLogout:T,className:W}=e,[X,Y]=(0,l.useState)(!1),[$,ee]=(0,l.useState)({}),[es,ea]=(0,l.useState)({totalSeeds:0,totalResonance:0,totalClusters:0,averageLuminosity:0}),[et,el]=(0,l.useState)([]),[ei,er]=(0,l.useState)([]),[en,ec]=(0,l.useState)(!0),[ed,eo]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{ec(!0),ea({totalSeeds:15,totalResonance:1250,totalClusters:3,averageLuminosity:78});let e=[{id:"1",creator:K.id,content:"今天创作了一个新的星种",content_type:"text",location:K.location,content_vector:[],spectral_tags:["创作","生活"],luminosity:85,resonance_count:128,status:"active",created:new Date().toISOString(),updated:new Date().toISOString()}];el(e);let s=[{id:"1",members:[K.id,"user2","user3"],core_users:[K.id,"user2"],resonance_score:85,geographic_center:K.location,activity_level:92,spectral_diversity:{topics:["生活","科技"],count:2},expiration_time:new Date(Date.now()+6048e5).toISOString(),cluster_vector:[],created:new Date().toISOString(),updated:new Date().toISOString()}];er(s)}catch(e){console.error("获取用户数据失败:",e)}finally{ec(!1)}})()},[K.id]);let ex=async()=>{try{eo(!0),await Q($),Y(!1),ee({})}catch(e){console.error("保存失败:",e)}finally{eo(!1)}},em=(e,s)=>{ee(a=>({...a,[e]:s}))},ev=(e,s)=>{ee(a=>({...a,privacy_settings:{...a.privacy_settings,[e]:s}}))},eh=(e,s)=>{ee(a=>({...a,ai_preferences:{...a.ai_preferences,[e]:s}}))};return en?(0,t.jsx)(r.Zb,{className:(0,n.cn)("h-96 flex items-center justify-center",W),children:(0,t.jsx)(r.gb,{text:"加载档案中..."})}):(0,t.jsxs)("div",{className:(0,n.cn)("space-y-6",W),children:[(0,t.jsx)(r.Zb,{children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,t.jsx)(r.qE,{size:"xl",src:K.avatar,fallback:K.username.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-text-primary",children:X?(0,t.jsx)(r.II,{value:$.username||K.username,onChange:e=>em("username",e.target.value),className:"text-2xl font-bold"}):K.username}),(0,t.jsxs)(r.Vp,{variant:"gold",size:"sm",children:[(0,t.jsx)("i",{className:"fas fa-star mr-1"}),"星尘探索者"]})]}),(0,t.jsx)("div",{className:"text-text-secondary mb-4",children:X?(0,t.jsx)(r.II,{value:$.email||K.email,onChange:e=>em("email",e.target.value),type:"email"}):K.email}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-text-secondary",children:[(0,t.jsx)("i",{className:"fas fa-calendar mr-1"}),"加入时间: ",(0,n.p6)(K.created)]}),K.location&&(0,t.jsxs)("span",{className:"text-sm text-text-secondary",children:[(0,t.jsx)("i",{className:"fas fa-map-marker-alt mr-1"}),K.location.lat.toFixed(2),", ",K.location.lng.toFixed(2)]})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:X?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.zx,{onClick:ex,loading:ed,size:"sm",children:[(0,t.jsx)("i",{className:"fas fa-save mr-1"}),"保存"]}),(0,t.jsx)(r.zx,{onClick:()=>{ee({}),Y(!1)},variant:"secondary",size:"sm",children:"取消"})]}):(0,t.jsxs)(r.zx,{onClick:()=>{ee({username:K.username,email:K.email,privacy_settings:K.privacy_settings,ai_preferences:K.ai_preferences}),Y(!0)},variant:"secondary",size:"sm",children:[(0,t.jsx)("i",{className:"fas fa-edit mr-1"}),"编辑"]})})]})})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsx)(r.Zb,{className:"text-center",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-accent-gold mb-1",children:es.totalSeeds}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"创建星种"})]})}),(0,t.jsx)(r.Zb,{className:"text-center",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-accent-red mb-1",children:(0,n.uf)(es.totalResonance)}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"总共鸣"})]})}),(0,t.jsx)(r.Zb,{className:"text-center",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-accent-purple mb-1",children:es.totalClusters}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"加入星团"})]})}),(0,t.jsx)(r.Zb,{className:"text-center",children:(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-accent-cyan mb-1",children:[es.averageLuminosity,"\xb0C"]}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"平均光度"})]})})]}),(0,t.jsx)(r.Zb,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[(0,t.jsx)("i",{className:"fas fa-shield-alt mr-2"}),"隐私设置"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-text-primary font-medium",children:"显示位置信息"}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"允许其他用户看到你的大致位置"})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:X?null===(C=null!==(S=null===(s=$.privacy_settings)||void 0===s?void 0:s.showLocation)&&void 0!==S?S:null===(a=K.privacy_settings)||void 0===a?void 0:a.showLocation)||void 0===C||C:null===(I=null===(i=K.privacy_settings)||void 0===i?void 0:i.showLocation)||void 0===I||I,onChange:e=>ev("showLocation",e.target.checked),className:"sr-only peer",disabled:!X}),(0,t.jsx)("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-text-primary font-medium",children:"显示兴趣向量"}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"允许 AI 使用你的兴趣数据进行匹配"})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:X?null===(P=null!==(z=null===(c=$.privacy_settings)||void 0===c?void 0:c.showInterests)&&void 0!==z?z:null===(d=K.privacy_settings)||void 0===d?void 0:d.showInterests)||void 0===P||P:null===(Z=null===(o=K.privacy_settings)||void 0===o?void 0:o.showInterests)||void 0===Z||Z,onChange:e=>ev("showInterests",e.target.checked),className:"sr-only peer",disabled:!X}),(0,t.jsx)("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-text-primary font-medium",children:"允许星团邀请"}),(0,t.jsx)("div",{className:"text-sm text-text-secondary",children:"其他用户可以邀请你加入星团"})]}),(0,t.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:X?null===(D=null!==(L=null===(x=$.privacy_settings)||void 0===x?void 0:x.allowInvites)&&void 0!==L?L:null===(m=K.privacy_settings)||void 0===m?void 0:m.allowInvites)||void 0===D||D:null===(O=null===(v=K.privacy_settings)||void 0===v?void 0:v.allowInvites)||void 0===O||O,onChange:e=>ev("allowInvites",e.target.checked),className:"sr-only peer",disabled:!X}),(0,t.jsx)("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]})]})]})}),(0,t.jsx)(r.Zb,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[(0,t.jsx)("i",{className:"fas fa-robot mr-2"}),"AI 偏好设置"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-text-primary font-medium mb-2",children:"内容推荐强度"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"保守"}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:X?null!==(R=null!==(E=null===(h=$.ai_preferences)||void 0===h?void 0:h.recommendationStrength)&&void 0!==E?E:null===(u=K.ai_preferences)||void 0===u?void 0:u.recommendationStrength)&&void 0!==R?R:50:null!==(A=null===(p=K.ai_preferences)||void 0===p?void 0:p.recommendationStrength)&&void 0!==A?A:50,onChange:e=>eh("recommendationStrength",parseInt(e.target.value)),className:"flex-1",disabled:!X}),(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"激进"}),(0,t.jsxs)("span",{className:"text-sm text-accent-gold min-w-[3rem] text-center",children:[X?null!==(U=null!==(F=null===(f=$.ai_preferences)||void 0===f?void 0:f.recommendationStrength)&&void 0!==F?F:null===(j=K.ai_preferences)||void 0===j?void 0:j.recommendationStrength)&&void 0!==U?U:50:null!==(V=null===(N=K.ai_preferences)||void 0===N?void 0:N.recommendationStrength)&&void 0!==V?V:50,"%"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-text-primary font-medium mb-2",children:"星团匹配精度"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"宽松"}),(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:X?null!==(J=null!==(q=null===(g=$.ai_preferences)||void 0===g?void 0:g.clusterPrecision)&&void 0!==q?q:null===(y=K.ai_preferences)||void 0===y?void 0:y.clusterPrecision)&&void 0!==J?J:70:null!==(M=null===(b=K.ai_preferences)||void 0===b?void 0:b.clusterPrecision)&&void 0!==M?M:70,onChange:e=>eh("clusterPrecision",parseInt(e.target.value)),className:"flex-1",disabled:!X}),(0,t.jsx)("span",{className:"text-sm text-text-secondary",children:"精确"}),(0,t.jsxs)("span",{className:"text-sm text-accent-gold min-w-[3rem] text-center",children:[X?null!==(G=null!==(B=null===(_=$.ai_preferences)||void 0===_?void 0:_.clusterPrecision)&&void 0!==B?B:null===(w=K.ai_preferences)||void 0===w?void 0:w.clusterPrecision)&&void 0!==G?G:70:null!==(H=null===(k=K.ai_preferences)||void 0===k?void 0:k.clusterPrecision)&&void 0!==H?H:70,"%"]})]})]})]})]})}),(0,t.jsx)(r.Zb,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[(0,t.jsx)("i",{className:"fas fa-star mr-2"}),"最近创建的星种"]}),(0,t.jsx)("div",{className:"space-y-3",children:et.map(e=>{var s;return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-primary-secondary rounded-xl",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-accent-gold"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"text-text-primary font-medium mb-1",children:e.content}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-heart mr-1"}),e.resonance_count," 共鸣"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-fire mr-1"}),e.luminosity,"\xb0C"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-clock mr-1"}),(0,n.p6)(e.created)]})]})]}),(0,t.jsx)("div",{className:"flex gap-1",children:null===(s=e.spectral_tags)||void 0===s?void 0:s.map((e,s)=>(0,t.jsxs)(r.Vp,{variant:"cyan",size:"sm",children:["#",e]},s))})]},e.id)})})]})}),(0,t.jsx)(r.Zb,{children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[(0,t.jsx)("i",{className:"fas fa-users mr-2"}),"加入的星团"]}),(0,t.jsx)("div",{className:"space-y-3",children:ei.map(e=>{var s,a;return(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-primary-secondary rounded-xl",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-accent-purple"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"text-text-primary font-medium mb-1",children:["星团 #",e.id]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-users mr-1"}),e.members.length," 成员"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-heart mr-1"}),e.resonance_score," 共鸣值"]}),(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-fire mr-1"}),e.activity_level,"% 活跃度"]})]})]}),(0,t.jsx)("div",{className:"flex gap-1",children:null===(a=e.spectral_diversity)||void 0===a?void 0:null===(s=a.topics)||void 0===s?void 0:s.map((e,s)=>(0,t.jsxs)(r.Vp,{variant:"purple",size:"sm",children:["#",e]},s))})]},e.id)})})]})}),(0,t.jsx)(r.Zb,{className:"border-accent-red/20",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold text-accent-red mb-4",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-triangle mr-2"}),"危险操作"]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(r.zx,{variant:"danger",onClick:T,className:"w-full",children:[(0,t.jsx)("i",{className:"fas fa-sign-out-alt mr-2"}),"退出登录"]}),(0,t.jsxs)(r.zx,{variant:"danger",onClick:()=>{confirm("确定要删除账户吗？此操作不可撤销！")&&console.log("删除账户")},className:"w-full",children:[(0,t.jsx)("i",{className:"fas fa-trash mr-2"}),"删除账户"]})]})]})})]})};var d=a(6886),o=a(9376);function x(){let e=(0,o.useRouter)(),s=d.pb.authStore.model||{},a=async e=>{console.log("更新用户资料:",e)};return(0,t.jsxs)("div",{className:"min-h-screen bg-primary-bg",children:[(0,t.jsx)(i.tD,{title:"个人档案",user:{name:s.username||"用户",avatar:s.avatar},onMenuClick:()=>e.push("/"),onProfileClick:()=>e.push("/profile")}),(0,t.jsx)("main",{className:"pt-16 pb-20 px-4",children:(0,t.jsx)("div",{className:"max-w-md mx-auto",children:(0,t.jsx)(c,{currentUser:s,onUpdateProfile:a,onLogout:()=>{d.pb.authStore.clear(),e.push("/login")}})})}),(0,t.jsx)(i.LJ,{currentPage:"profile",onPageChange:s=>e.push("home"===s?"/":"/".concat(s))})]})}}},function(e){e.O(0,[137,579,436,971,117,744],function(){return e(e.s=9543)}),_N_E=e.O()}]);
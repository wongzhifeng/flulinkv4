(()=>{var e={};e.id=86,e.ids=[86],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6977:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>p,tree:()=>d}),t(5747),t(5866),t(2029);var a=t(3191),r=t(8716),n=t(7922),i=t.n(n),c=t(5231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);t.d(s,l);let d=["",{children:["(main)",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5747)),"/Users/mac/Desktop/code/flulink/src/app/(main)/profile/page.tsx"]}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2029)),"/Users/mac/Desktop/code/flulink/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/mac/Desktop/code/flulink/src/app/(main)/profile/page.tsx"],x="/(main)/profile/page",m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(main)/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4297:(e,s,t)=>{Promise.resolve().then(t.bind(t,3123))},3123:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(326),r=t(7577),n=t(1364),i=t(2068),c=t(1223);let l=({currentUser:e,onUpdateProfile:s,onLogout:t,className:n})=>{let[l,d]=(0,r.useState)(!1),[o,x]=(0,r.useState)({}),[m,p]=(0,r.useState)({totalSeeds:0,totalResonance:0,totalClusters:0,averageLuminosity:0}),[h,f]=(0,r.useState)([]),[u,j]=(0,r.useState)([]),[v,g]=(0,r.useState)(!0),[N,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{g(!0),p({totalSeeds:15,totalResonance:1250,totalClusters:3,averageLuminosity:78});let s=[{id:"1",creator:e.id,content:"今天创作了一个新的星种",content_type:"text",location:e.location,content_vector:[],spectral_tags:["创作","生活"],luminosity:85,resonance_count:128,status:"active",created:new Date().toISOString(),updated:new Date().toISOString()}];f(s);let t=[{id:"1",members:[e.id,"user2","user3"],core_users:[e.id,"user2"],resonance_score:85,geographic_center:e.location,activity_level:92,spectral_diversity:{topics:["生活","科技"],count:2},expiration_time:new Date(Date.now()+6048e5).toISOString(),cluster_vector:[],created:new Date().toISOString(),updated:new Date().toISOString()}];j(t)}catch(e){console.error("获取用户数据失败:",e)}finally{g(!1)}})()},[e.id]);let b=async()=>{try{y(!0),await s(o),d(!1),x({})}catch(e){console.error("保存失败:",e)}finally{y(!1)}},_=(e,s)=>{x(t=>({...t,[e]:s}))},w=(e,s)=>{x(t=>({...t,privacy_settings:{...t.privacy_settings,[e]:s}}))},k=(e,s)=>{x(t=>({...t,ai_preferences:{...t.ai_preferences,[e]:s}}))};return v?a.jsx(i.Zb,{className:(0,c.cn)("h-96 flex items-center justify-center",n),children:a.jsx(i.gb,{text:"加载档案中..."})}):(0,a.jsxs)("div",{className:(0,c.cn)("space-y-6",n),children:[a.jsx(i.Zb,{children:a.jsx("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[a.jsx(i.qE,{size:"xl",src:e.avatar,fallback:e.username.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:l?a.jsx(i.II,{value:o.username||e.username,onChange:e=>_("username",e.target.value),className:"text-2xl font-bold"}):e.username}),(0,a.jsxs)(i.Vp,{variant:"gold",size:"sm",children:[a.jsx("i",{className:"fas fa-star mr-1"}),"星尘探索者"]})]}),a.jsx("div",{className:"text-text-secondary mb-4",children:l?a.jsx(i.II,{value:o.email||e.email,onChange:e=>_("email",e.target.value),type:"email"}):e.email}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-sm text-text-secondary",children:[a.jsx("i",{className:"fas fa-calendar mr-1"}),"加入时间: ",(0,c.p6)(e.created)]}),e.location&&(0,a.jsxs)("span",{className:"text-sm text-text-secondary",children:[a.jsx("i",{className:"fas fa-map-marker-alt mr-1"}),e.location.lat.toFixed(2),", ",e.location.lng.toFixed(2)]})]})]}),a.jsx("div",{className:"flex gap-2",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.zx,{onClick:b,loading:N,size:"sm",children:[a.jsx("i",{className:"fas fa-save mr-1"}),"保存"]}),a.jsx(i.zx,{onClick:()=>{x({}),d(!1)},variant:"secondary",size:"sm",children:"取消"})]}):(0,a.jsxs)(i.zx,{onClick:()=>{x({username:e.username,email:e.email,privacy_settings:e.privacy_settings,ai_preferences:e.ai_preferences}),d(!0)},variant:"secondary",size:"sm",children:[a.jsx("i",{className:"fas fa-edit mr-1"}),"编辑"]})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsx(i.Zb,{className:"text-center",children:(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-accent-gold mb-1",children:m.totalSeeds}),a.jsx("div",{className:"text-sm text-text-secondary",children:"创建星种"})]})}),a.jsx(i.Zb,{className:"text-center",children:(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-accent-red mb-1",children:(0,c.uf)(m.totalResonance)}),a.jsx("div",{className:"text-sm text-text-secondary",children:"总共鸣"})]})}),a.jsx(i.Zb,{className:"text-center",children:(0,a.jsxs)("div",{className:"p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-accent-purple mb-1",children:m.totalClusters}),a.jsx("div",{className:"text-sm text-text-secondary",children:"加入星团"})]})}),a.jsx(i.Zb,{className:"text-center",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-accent-cyan mb-1",children:[m.averageLuminosity,"\xb0C"]}),a.jsx("div",{className:"text-sm text-text-secondary",children:"平均光度"})]})})]}),a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[a.jsx("i",{className:"fas fa-shield-alt mr-2"}),"隐私设置"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-text-primary font-medium",children:"显示位置信息"}),a.jsx("div",{className:"text-sm text-text-secondary",children:"允许其他用户看到你的大致位置"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l?o.privacy_settings?.showLocation??e.privacy_settings?.showLocation??!0:e.privacy_settings?.showLocation??!0,onChange:e=>w("showLocation",e.target.checked),className:"sr-only peer",disabled:!l}),a.jsx("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-text-primary font-medium",children:"显示兴趣向量"}),a.jsx("div",{className:"text-sm text-text-secondary",children:"允许 AI 使用你的兴趣数据进行匹配"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l?o.privacy_settings?.showInterests??e.privacy_settings?.showInterests??!0:e.privacy_settings?.showInterests??!0,onChange:e=>w("showInterests",e.target.checked),className:"sr-only peer",disabled:!l}),a.jsx("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-text-primary font-medium",children:"允许星团邀请"}),a.jsx("div",{className:"text-sm text-text-secondary",children:"其他用户可以邀请你加入星团"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:l?o.privacy_settings?.allowInvites??e.privacy_settings?.allowInvites??!0:e.privacy_settings?.allowInvites??!0,onChange:e=>w("allowInvites",e.target.checked),className:"sr-only peer",disabled:!l}),a.jsx("div",{className:"w-11 h-6 bg-primary-secondary peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-accent-gold"})]})]})]})]})}),a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[a.jsx("i",{className:"fas fa-robot mr-2"}),"AI 偏好设置"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-text-primary font-medium mb-2",children:"内容推荐强度"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm text-text-secondary",children:"保守"}),a.jsx("input",{type:"range",min:"0",max:"100",value:l?o.ai_preferences?.recommendationStrength??e.ai_preferences?.recommendationStrength??50:e.ai_preferences?.recommendationStrength??50,onChange:e=>k("recommendationStrength",parseInt(e.target.value)),className:"flex-1",disabled:!l}),a.jsx("span",{className:"text-sm text-text-secondary",children:"激进"}),(0,a.jsxs)("span",{className:"text-sm text-accent-gold min-w-[3rem] text-center",children:[l?o.ai_preferences?.recommendationStrength??e.ai_preferences?.recommendationStrength??50:e.ai_preferences?.recommendationStrength??50,"%"]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-text-primary font-medium mb-2",children:"星团匹配精度"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-sm text-text-secondary",children:"宽松"}),a.jsx("input",{type:"range",min:"0",max:"100",value:l?o.ai_preferences?.clusterPrecision??e.ai_preferences?.clusterPrecision??70:e.ai_preferences?.clusterPrecision??70,onChange:e=>k("clusterPrecision",parseInt(e.target.value)),className:"flex-1",disabled:!l}),a.jsx("span",{className:"text-sm text-text-secondary",children:"精确"}),(0,a.jsxs)("span",{className:"text-sm text-accent-gold min-w-[3rem] text-center",children:[l?o.ai_preferences?.clusterPrecision??e.ai_preferences?.clusterPrecision??70:e.ai_preferences?.clusterPrecision??70,"%"]})]})]})]})]})}),a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[a.jsx("i",{className:"fas fa-star mr-2"}),"最近创建的星种"]}),a.jsx("div",{className:"space-y-3",children:h.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-primary-secondary rounded-xl",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-accent-gold"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"text-text-primary font-medium mb-1",children:e.content}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-heart mr-1"}),e.resonance_count," 共鸣"]}),(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-fire mr-1"}),e.luminosity,"\xb0C"]}),(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-clock mr-1"}),(0,c.p6)(e.created)]})]})]}),a.jsx("div",{className:"flex gap-1",children:e.spectral_tags?.map((e,s)=>a.jsxs(i.Vp,{variant:"cyan",size:"sm",children:["#",e]},s))})]},e.id))})]})}),a.jsx(i.Zb,{children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-text-primary mb-4",children:[a.jsx("i",{className:"fas fa-users mr-2"}),"加入的星团"]}),a.jsx("div",{className:"space-y-3",children:u.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-primary-secondary rounded-xl",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-accent-purple"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"text-text-primary font-medium mb-1",children:["星团 #",e.id]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-users mr-1"}),e.members.length," 成员"]}),(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-heart mr-1"}),e.resonance_score," 共鸣值"]}),(0,a.jsxs)("span",{children:[a.jsx("i",{className:"fas fa-fire mr-1"}),e.activity_level,"% 活跃度"]})]})]}),a.jsx("div",{className:"flex gap-1",children:e.spectral_diversity?.topics?.map((e,s)=>a.jsxs(i.Vp,{variant:"purple",size:"sm",children:["#",e]},s))})]},e.id))})]})}),a.jsx(i.Zb,{className:"border-accent-red/20",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-accent-red mb-4",children:[a.jsx("i",{className:"fas fa-exclamation-triangle mr-2"}),"危险操作"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)(i.zx,{variant:"danger",onClick:t,className:"w-full",children:[a.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),"退出登录"]}),(0,a.jsxs)(i.zx,{variant:"danger",onClick:()=>{confirm("确定要删除账户吗？此操作不可撤销！")&&console.log("删除账户")},className:"w-full",children:[a.jsx("i",{className:"fas fa-trash mr-2"}),"删除账户"]})]})]})})]})};var d=t(8551),o=t(5047);function x(){let e=(0,o.useRouter)(),s=d.pb.authStore.model||{},t=async e=>{console.log("更新用户资料:",e)};return(0,a.jsxs)("div",{className:"min-h-screen bg-primary-bg",children:[a.jsx(n.tD,{title:"个人档案",user:{name:s.username||"用户",avatar:s.avatar},onMenuClick:()=>e.push("/"),onProfileClick:()=>e.push("/profile")}),a.jsx("main",{className:"pt-16 pb-20 px-4",children:a.jsx("div",{className:"max-w-md mx-auto",children:a.jsx(l,{currentUser:s,onUpdateProfile:t,onLogout:()=>{d.pb.authStore.clear(),e.push("/login")}})})}),a.jsx(n.LJ,{currentPage:"profile",onPageChange:s=>e.push("home"===s?"/":`/${s}`)})]})}},5747:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(8570).createProxy)(String.raw`/Users/mac/Desktop/code/flulink/src/app/(main)/profile/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,347,325,573,626],()=>t(6977));module.exports=a})();